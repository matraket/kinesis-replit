# PRD T10 – Configuración Web, Stack-UI y Layout Base

## 1. Metadatos

* **ID:** T10
* **Fase:** 4 – Frontend (Web) — Web Corporativa
* **Estado:** Definición
* **Dependencias previas:**

  * T0–T1: entorno base y dominio/DB.
  * T2–T5: API pública de lectura y endpoints de leads/settings/legal.
  * T6–T8: CMS bootstrap + shared/ui + vistas de contenido web y horarios en CMS.
* **Módulos afectados:**

  * **IN:** `web/`, `shared/ui`, `shared/components/sections`, configuración Tailwind/root.
  * **OUT:** `cms/**`, `api/**`, `context/**`, `.replit`, `replit.nix`, `replit.md`.

---

## 2. Objetivo

Montar la **base de la Web pública** de Kinesis:

* Inicializar el módulo `web/` con **React + Vite + Tailwind** (si aún no existe).
* Integrar **Stack-UI Kinesis**:

  * Componentes base con **shadcn/ui** compartidos en `shared/ui`.
  * Bloques de secciones inspirados en **Launch UI Components** en `shared/components/sections`.
* Configurar **theming** (tokens CSS + Tailwind) coherente con la identidad Kinesis.
* Definir **ruteo público** mínimo y un **layout principal (LayoutPublic)** mobile-first (Header + Nav + Footer).

Sin implementar aún páginas finales ricas: eso será T11–T14.

---

## 3. Alcance

### 3.1 IN SCOPE (T10)

1. **Bootstrap `web/`**

   * Estructura base Vite React TS (o equivalente alineado con monorepo).
   * Entrypoint `web/src/main.tsx` con `BrowserRouter` y `React.StrictMode` (no eliminar StrictMode).
   * `web/src/App.tsx` y router público.

2. **Stack-UI y theming**

   * Configurar **shadcn/ui** en `web/` según `KB-shadcn-ui.md` (usando CLI `npx shadcn-ui`).
   * Garantizar que los componentes base (Button, Card, Input, Form, Dialog, Avatar, etc.) viven en `shared/ui` y son reutilizables por `web/` y `cms/`.
   * Ajustar **tokens de theme** (CSS variables tipo `--background`, `--foreground`, `--brand`, `--radius`) y Tailwind para reflejar la paleta Kinesis.

3. **Capa de secciones (Launch UI)**

   * Crear carpeta `shared/components/sections/` (si no existe).
   * Definir una **colección mínima** de secciones (aún con contenido placeholder), inspiradas en `KB-launch-ui-components.md`:

     * `HeroPrimary`
     * `FeatureGridSection`
     * `PricingSection`
     * `FaqSection`
     * `FooterSection`
   * Estas secciones **no tienen por qué estar todavía cableadas a datos reales** (T11–T14 se encargarán de usarlas).

4. **Ruteo público mínimo**

   * Definir Router público con rutas **todas existentes, aunque muestren placeholders**:

     * `/` (Home)
     * `/quienes-somos`
     * `/modelos-de-negocio`
     * `/programas`
     * `/programas/:slug`
     * `/equipo`
     * `/horarios-tarifas`
     * `/legal/aviso`
     * `/legal/privacidad`
   * Cada ruta debe renderizar al menos:

     * `LayoutPublic`
     * Un título `<h1>` semántico
     * Un bloque de contenido mínimo (texto de “En construcción” o similar).

5. **Layout principal (LayoutPublic) mobile-first**

   * Componente `LayoutPublic` reutilizable con:

     * `Header` con marca Kinesis y navegación principal.
     * Menú **hamburger en móvil** usando componentes de shadcn/ui (`Sheet` o `Dialog`), y navegación horizontal en desktop (`NavigationMenu` o similar), siguiendo `KB-patrones-responsive-kinesis-web.md`.
     * `main` con `Outlet` de React Router.
     * `Footer` basado en `FooterSection`.
   * Layout mobile-first:

     * `container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8`
     * Stack vertical en móvil, grid/flex en desktop, según `KB-patrones-responsive-kinesis-web.md`.

6. **Integración con monolito y tooling**

   * Incluir `web/**` en el `tailwind.config` global para que se apliquen las clases.
   * Ajustar scripts y configuración necesarios **sin romper**:

     * `pnpm install`
     * `pnpm dev` (API + CMS siguen arrancando como hasta ahora).

### 3.2 OUT OF SCOPE – NO IMPLEMENTAR EN T10

Para evitar los problemas de T7 (scope creep) se marcan explícitamente:

* ❌ Cualquier **formulario funcional** en la Web (contacto, leads, preinscripción, reserva Élite, etc.). Eso es T14.
* ❌ Lógica de llamadas a la **API pública T2** (fetch de programas, equipo, etc.). Eso se ve en T11–T13.
* ❌ Implementar **Media Library**, integración con Replit App Storage o subida de ficheros.
* ❌ Añadir editores WYSIWYG (TipTap, ProseMirror, DOMPurify, etc.).
* ❌ Cambiar esquema de base de datos, migraciones SQL o lógica de dominio.
* ❌ Modificar `cms/**` más allá de **importar componentes existentes** de `shared/ui`.
* ❌ Modificar `.replit`, `replit.nix`, `replit.md`, `context/**` o rutas API existentes.
* ❌ Eliminar `React.StrictMode` en cualquier `main.tsx`.
* ❌ Añadir dependencias que no estén alineadas con el stack definido (React, Vite, Tailwind, shadcn/ui, Launch UI, React Router, React Query, RHF, Zod).

---

## 4. Dependencias a añadir/actualizar

> Siguiendo las lecciones del informe Copilot: **evitar añadir paquetes innecesarios** y **no introducir 30+ dependencias nuevas** fuera de alcance.

### 4.1 Principios

* Reutilizar las versiones de **React, ReactDOM, react-router-dom, tailwindcss, @tanstack/react-query, react-hook-form, zod, shadcn/ui** ya presentes en el monolito (usadas por `cms/`).
* No instalar nuevas librerías de UI completas adicionales (Mantine, MUI, Chakra, etc.).
* No instalar nada relacionado con **editores ricos**, **media library** o **analytics** en T10.

### 4.2 Paquetes permitidos en T10 (si realmente faltan)

Solo si no están ya en el `package.json` raíz:

* `react` / `react-dom` (peer necesario de Vite React).
* `react-router-dom`
* `@vitejs/plugin-react-swc` (o equivalente usado en `cms/`).
* Cualquier dependencia **estrictamente necesaria** para que `web/` sea un proyecto Vite React TS idéntico en stack a `cms/`.

> Criterio: si un paquete **ya existe** en el monolito, se reutiliza la **misma versión**. Si no existe y no está en esta lista, **no se instala** en T10.

---

## 5. Reglas y restricciones

### 5.1 De negocio / producto

* La Web es el **escaparate principal** de Kinesis: debe transmitir claridad, estructura y sensación premium desde el layout base.
* T10 crea sólo la **infraestructura visual y técnica**; el contenido de negocio real se incorporará a partir de T11 (Home, modelos de negocio, etc.).

### 5.2 De UI/UX (Stack-UI + patrones responsive)

Tomadas de `KB-shadcn-ui.md`, `KB-launch-ui-components.md`, `KB-template-serene-yoga.md` y `KB-patrones-responsive-kinesis-web.md`:

* **Mobile first:**

  * Diseño pensado primero para `<640px`; luego se amplía con `sm:`, `md:`, `lg:`.
  * Navegación colapsada en móvil (hamburger + `Sheet`/`Dialog`), desplegada en desktop.
* **Layout:**

  * `min-h-screen` con estructura `flex flex-col`.
  * Contenido en `container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8`.
* **Componentes base shadcn:**

  * Botones, inputs, formularios, dialogs, etc., siguen la API de shadcn (props, variantes, tamaños).
  * Uso de `Button` y componentes `NavigationMenu`, `Sheet`, `Dialog` donde aplique para nav y CTA.
* **Serene Yoga / Launch UI:**

  * Header limpio, sticky, con fondo semi-transparente + blur.
  * Secciones con buena jerarquía tipográfica, espacio respirable, cards con borde suave y sombras ligeras.
  * Footer con columnas responsivas y enlaces clave.

### 5.3 Técnicas / Replit / monolito

* No se modifica la **arquitectura de monolito modular**: `/api`, `/cms`, `/web`, `/shared`, etc.
* No se tocan:

  * `.replit`
  * `replit.nix`
  * `replit.md`
  * `context/**`
* No se cambian las rutas HTTP existentes (`/api/**`, `/admin/**`).
* Se mantiene `React.StrictMode` en todos los entrypoints.
* No se añaden carpetas tipo `attached_assets/`, `Pasted-*`, ni se comitean archivos de depuración (logs, screenshots, JSON de debug).

---

## 6. Detalle funcional y técnico

### 6.1 Estructura de `web/`

Crear (si no existe) la siguiente estructura mínima:

* `web/`

  * `index.html`
  * `tsconfig.json`
  * `vite.config.ts`
  * `src/`

    * `main.tsx`
    * `App.tsx`
    * `app/`

      * `layout/PublicLayout.tsx`
      * `routes/PublicRouter.tsx`
      * `routes/HomeRoute.tsx`
      * `routes/AboutRoute.tsx` (`/quienes-somos`)
      * `routes/BusinessModelsRoute.tsx` (`/modelos-de-negocio`)
      * `routes/ProgramsRoute.tsx` (`/programas`)
      * `routes/ProgramDetailRoute.tsx` (`/programas/:slug`)
      * `routes/TeamRoute.tsx` (`/equipo`)
      * `routes/SchedulePricingRoute.tsx` (`/horarios-tarifas`)
      * `routes/LegalNoticeRoute.tsx` (`/legal/aviso`)
      * `routes/PrivacyPolicyRoute.tsx` (`/legal/privacidad`)

#### `web/src/main.tsx`

* Monta el árbol React con:

  * `React.StrictMode`
  * `BrowserRouter`
  * `<PublicRouter />`

* Se asegura de:

  * No duplicar lógica de `httpClient` o React Query aquí (eso vendrá en T11+).
  * No incluir providers que aún no son necesarios (Router y, si ya existen globalmente, ThemeProvider + QueryClientProvider **pueden** usarse, pero solo si están bien alineados con CMS).

#### `web/src/App.tsx`

* Puede ser un wrapper trivial que delega en `PublicRouter` o, si se prefiere, se elimina y se usa directamente `PublicRouter` desde `main.tsx`.
* El PRD-Agent lo concretará (ver bloque final).

### 6.2 LayoutPublic

Archivo: `web/src/app/layout/PublicLayout.tsx`

* Estructura:

  * `<div className="min-h-screen flex flex-col bg-background text-foreground">`

    * `<Header />`
    * `<main className="flex-1">`

      * `<Outlet />`
    * `<FooterSection />` (importado de `shared/components/sections/FooterSection`)

#### Header

* Componente interno, por ejemplo `PublicHeader`, dentro del mismo archivo o en `web/src/app/layout/PublicHeader.tsx`.

* Contiene:

  * Logo/Nombre Kinesis (puede reutilizar `siteInfo` futuro; por ahora, texto “Kinesis”).
  * Menú principal con enlaces `NavLink` a rutas definidas.
  * CTA “Preinscríbete” como `Button` de shadcn (link a `/programas` o `/horarios-tarifas` de momento).

* Responsive:

  * En desktop (`md+`): menú horizontal visible, sin hamburger.
  * En móvil (`<md`): botón hamburger (`lucide-react` `Menu` si ya existe en el proyecto) que abre un `Sheet` de shadcn con la navegación vertical.

### 6.3 Router Público

Archivo: `web/src/app/routes/PublicRouter.tsx`

* Usa `useRoutes` o `<Routes>/<Route>` de `react-router-dom`.

* Estructura típica:

  * Ruta raíz con `element={<PublicLayout />}` y `children` para todas las páginas:

    * `index` → `<HomeRoute />`
    * `path="quienes-somos"` → `<AboutRoute />`
    * `path="modelos-de-negocio"` → `<BusinessModelsRoute />`
    * `path="programas"` → `<ProgramsRoute />`
    * `path="programas/:slug"` → `<ProgramDetailRoute />`
    * `path="equipo"` → `<TeamRoute />`
    * `path="horarios-tarifas"` → `<SchedulePricingRoute />`
    * `path="legal/aviso"` → `<LegalNoticeRoute />`
    * `path="legal/privacidad"` → `<PrivacyPolicyRoute />`

* Cada `*Route.tsx` solo debe incluir, por ahora:

  * Un `<PageShell>` mínimo (puede ser una sección con container y `h1`).
  * Texto placeholder tipo “Esta página se implementará en T11–T14”.

### 6.4 Integración de shadcn/ui y shared/ui

* Asegurar que el CLI de shadcn está configurado correctamente para escribir componentes en `shared/ui` (no duplicar en `web/src/components/ui`).

* Confirmar que existen, como mínimo, los siguientes componentes:

  * `shared/ui/button.tsx`
  * `shared/ui/input.tsx`
  * `shared/ui/form.tsx`
  * `shared/ui/dialog.tsx`
  * `shared/ui/avatar.tsx`
  * `shared/ui/navigation-menu.tsx` (si se usa para nav)
  * `shared/ui/sheet.tsx` (o `drawer` equivalente para menú móvil)

* `web/` debe importarlos vía alias consistente (p.ej. `@/shared/ui/button` o el que se haya definido).

### 6.5 Secciones Launch UI

Crear en `shared/components/sections/`:

* `HeroPrimary.tsx`
* `FeatureGridSection.tsx`
* `PricingSection.tsx`
* `FaqSection.tsx`
* `FooterSection.tsx`

Cada componente:

* Recibe props mínimas tipadas (aunque en T10 se pueden usar valores por defecto).
* Usa componentes `shared/ui` y clases Tailwind inspiradas en Launch UI / Serene Yoga (hero 1-col móvil, 2-col desktop; grids responsivas; etc.).
* Por ahora, puede renderizar contenido estático placeholder (lorem/“coming soon”) siempre que la estructura esté clara.

### 6.6 Tailwind + Theming

* Actualizar `tailwind.config` global para incluir `web/**/*.{ts,tsx,js,jsx}` en `content`.
* Asegurar que las variables CSS de theme están definidas (según `KB-shadcn-ui.md`):

  * `--background`, `--foreground`, `--muted`, `--accent`, `--border`, `--radius`, `--brand`, etc.
* La Web puede usar las mismas variables que el CMS, pero:

  * Con layouts más aireados.
  * Con tipografía y paddings alineados con `KB-patrones-responsive-kinesis-web.md`.

---

## 7. Criterios de aceptación

### 7.1 Obligatorios

1. `pnpm install` en la raíz termina **sin errores**.
2. `pnpm dev` sigue arrancando el proyecto sin romper `api/` ni `cms/`.
3. El directorio `web/` existe y contiene al menos:

   * `vite.config.ts`, `index.html`, `tsconfig.json`
   * `src/main.tsx`, `src/app/layout/PublicLayout.tsx`, `src/app/routes/PublicRouter.tsx`
   * Ruta y componente para cada URL definida en el alcance.
4. Navegar a cada ruta (`/`, `/quienes-somos`, `/modelos-de-negocio`, `/programas`, `/programas/:slug`, `/equipo`, `/horarios-tarifas`, `/legal/aviso`, `/legal/privacidad`) no produce errores de runtime y muestra un layout con header + footer + h1.
5. En viewport móvil:

   * El header muestra un botón hamburger que abre/cierra correctamente el menú.
   * No hay scroll horizontal inesperado en las páginas base.
6. En viewport desktop:

   * La navegación principal se muestra desplegada en el header.
7. Existen los componentes de sección en `shared/components/sections/*` y compilan sin errores, aunque aún no se usen en todas las páginas.
8. No se ha añadido ninguna dependencia relacionada con WYSIWYG/Media Library (TipTap, ProseMirror, DOMPurify, etc.).
9. No se han modificado `.replit`, `replit.nix`, `replit.md`, `context/**`, ni se han eliminado `React.StrictMode`.

### 7.2 Opcionales (Nice to have, no obligatorios)

1. `PublicLayout` incluye un “scroll to top on route change” suave.
2. `FooterSection` ya contiene placeholders para enlaces a redes sociales y contacto.
3. El header incluye estado de “scrolled” (cambio sutil de sombra/fondo al hacer scroll).

---

## 8. Bloque PRD-Agent (versión sintetizada para el Agent)

> **Uso:** este bloque es el que se le entrega al Agent de Replit en modo Build.

### 8.1 Restricciones duras (NO HACER)

* NO tocar `.replit`, `replit.nix`, `replit.md`, ni nada dentro de `context/**`.
* NO modificar código dentro de `cms/**` ni `api/**` (solo puedes **leer**).
* NO eliminar `React.StrictMode` de ningún `main.tsx`.
* NO cambiar rutas existentes de la API (`/api/**`, `/admin/**`).
* NO instalar dependencias relacionadas con WYSIWYG, Media Library o editores ricos (TipTap, ProseMirror, DOMPurify, etc.).
* NO crear carpetas de debug (`attached_assets/`, `Pasted-*`, etc.) ni commitear logs/screenshots.

### 8.2 Archivos / rutas a CREAR o MODIFICAR (solo estos)

**Crear (si no existen):**

* `web/`

  * `index.html`
  * `tsconfig.json`
  * `vite.config.ts`
  * `src/main.tsx`
  * `src/App.tsx` (si decides usarlo)
  * `src/app/layout/PublicLayout.tsx`
  * `src/app/routes/PublicRouter.tsx`
  * `src/app/routes/HomeRoute.tsx`
  * `src/app/routes/AboutRoute.tsx`
  * `src/app/routes/BusinessModelsRoute.tsx`
  * `src/app/routes/ProgramsRoute.tsx`
  * `src/app/routes/ProgramDetailRoute.tsx`
  * `src/app/routes/TeamRoute.tsx`
  * `src/app/routes/SchedulePricingRoute.tsx`
  * `src/app/routes/LegalNoticeRoute.tsx`
  * `src/app/routes/PrivacyPolicyRoute.tsx`

* `shared/components/sections/`

  * `HeroPrimary.tsx`
  * `FeatureGridSection.tsx`
  * `PricingSection.tsx`
  * `FaqSection.tsx`
  * `FooterSection.tsx`

**Modificar (con cuidado, sin romper nada):**

* `tailwind.config.*` (solo para incluir `web/**/*.{ts,tsx,js,jsx}` en `content`).
* Cualquier archivo de configuración mínimo necesario para añadir el workspace `web` (por ejemplo, scripts en `package.json`), sin eliminar los existentes.

### 8.3 Comportamiento esperado (resumen)

* `web/` es un proyecto Vite React TS que usa `React.StrictMode` y `BrowserRouter`.
* `PublicLayout` define un shell con header + nav + footer mobile-first.
* `PublicRouter` define rutas para:

  * `/`, `/quienes-somos`, `/modelos-de-negocio`, `/programas`, `/programas/:slug`, `/equipo`, `/horarios-tarifas`, `/legal/aviso`, `/legal/privacidad`.
* Todas las páginas muestran al menos un `<h1>` y texto placeholder, sin peticiones a la API todavía.
* Los componentes de sección en `shared/components/sections/*` compilan y usan `shared/ui` + Tailwind.
* `pnpm install` y `pnpm dev` siguen funcionando sin errores.

### 8.4 Checklist binario para dar la tarea por completada

* [ ] `pnpm install` OK (sin errores).
* [ ] `pnpm dev` OK (API + CMS intactos).
* [ ] `web/src/main.tsx` usa `React.StrictMode` + `BrowserRouter` + `PublicRouter`.
* [ ] Todas las rutas públicas definidas existen y renderizan sin errores.
* [ ] Header con menú hamburger en móvil y nav horizontal en desktop funcionando.
* [ ] `shared/components/sections/*Section.tsx` creados y compilando.
* [ ] Ninguna dependencia WYSIWYG/MediaLibrary añadida.
* [ ] `.replit`, `replit.nix`, `replit.md`, `context/**`, `cms/**`, `api/**` sin cambios estructurales.
